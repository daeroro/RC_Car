24. Serial Communication interfaces

<24.1> High-Speed I2C Contraller

5개의 High speed I2C 컨트롤러 모듈이 있다.


<24.1.1> HS I2C 개요

로컬 호스트와 I2C 버스(선)을 통해 연결되는 장비들 사이의 인터페이스를 제공

<24.1.> HS I2C 환경

 로컬 호스트와 I2C 버스(선)을 통해 연결되는 장비들 사이의 인터페이스를 제공

연결옵션, 모든 가능한 인터페이스를 설명
프로토콜과 각각 사용되는 데이터포맷(전송하는 형태)을 설명


<24.1.2.2> HS I2C 연결 포로토콜 과 데이터 포맷

<24.1.2.2.1> 데이터 포맷

시리얼 데이터 라인(핀으로 SDA로 연결)에 들어가는 데이터 포맷은 8비트 길이
(MSB는 처음 보내는 비트)


<24.1.2.2.2> HS I2C 데이터 유효

SCL이 낮은 상태일 때 SDA 상태가 바뀔 수 있다.


<24.1.2.2.3> HS I2C 시작과 끝 조건


신호가 시작되는 조건: SCL이 높은 상태에서 SDA가 위에서 아래로 상태가 바뀌면
신호가 끝나는 조건: SCL이 높은 상태에서 SDA가 아래에서 위로 상태가 바뀌면


<24.1.2.2.4> HS I2C 주소

7비트, 10비트 주소 포맷
7비트, 10비트 주소 포맷 with 다시 시작 조건


<24.1.2.2.4.1> F/S 모드에서 데이터 전송 포맷

* 주소가 7비트일 때,

시작 조건 비트 + 슬레이브 주소 7비트 + R/W비트 (0-> write 마스터가 쓰는 것, 1-> read 마스터가 읽어오는 것) 

* 주소가 10비트일 때,

슬레이브 주소 앞 7비트-> 11110XX: 10자리 슬레이브 주소 앞 주소 2자리가 XX에 들어간다.
슬레이브 주소 뒤 8비트-> R/W비트와 ACK비트 뒤에 나온다.

* 다시 시작할 때,

ACK비트 후 다시 시작 조건 비트가 나온다.


<24.1.2.2.4.2> HS모드에서 데이터 전송 포맷

F/S모드와는 다르게 마스터 코드가 앞에 나오고 Sr비트가 나온다.


<24.1.2.2.5> HS I2C 마스터 보내기

데이터가 SDA를 통해 나간다.
스스로 생성한 SCL도 같이 나간다.


<24.1.2.2.6> HS I2C 마스터 받기

R/Wrk 1이면 마스터가 리시버 모드가 된다.
스스로 SCL도 생성된다.


<24.1.2.2.7> HS I2C 슬레이브 보내기

마스터에서 보낸 데이터 포맷의 슬레이브 주소가 같고 R/W 비트가 1이면 이 모드로 들어간다.
클락은 생성되지 않고 클락은 낮은 상태를 유지한다.


<24.1.2.2.8> HS I2C 슬레이브 받기

마스터로 부터 데이터와 클락을 받는다.


<24.1.2.2.9> HS I2C 버스 중재

여러 마스터가 같은 버스선으로 보내면 중재
우선순위를 정해 순서대로 보내게 된다.


<24.1.2.2.10> HS I2C 클락 생성과 동기화

클락은 오직 하나의 마스터만 생성
한 마스터가 먼저 클락을 생성하면 다른 마스터들을 생성하지 않는다.

마스터와 슬레이브의 속도가 안맞을 때 마스터에 비해 슬레이브가 느려도 마스터가 wait상태를 사용해 
슬레이브가 충분한 시간을 가지고 처리할 수 있도록 한다.


<24.1.4.2> HS I2C Clocks

PRCM에서 I2C로 들어온 클락이 나눠져서 들어가거나 그대로 I2C 내부로 들어간다.


<24.1.4.2.2> HS I2C 자동 블락

I2C 컨트롤러가 외부 마스터 장치에 의해 특정한 자신만의 주소를 사용하게 되면 슬레이브 주소가 나온 후 블락킹을 명령한다.


<24.1.4.3> HS I2C 소프트웨어 리셋

레지스터를 사용해 리셋하는 방법이 나와있다.


<24.1.4.4> HS I2C 파워 관리

파워 관리 모드 (표 24-8)
클락 활동 모드 (표 24-9)


<24.1.4.5> HS I2C 인터럽트 요청

표 24-10 다양한 인터럽트
